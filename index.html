<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bashoratchi Uz</title>
<style>
  body{margin:0;font-family:Arial,sans-serif;background:#111;color:#fff;text-align:center;}
  .page{display:none;padding:40px;}
  .active{display:block;}
  input,button{padding:10px;margin:5px;border:none;border-radius:6px;}
  input{width:80%;max-width:250px;}
  button{background:#28a745;color:#fff;cursor:pointer;}
  button:hover{background:#1e7e34;}
  .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;max-width:300px;margin:20px auto;}
  .cell{aspect-ratio:1/1;background:#3498db;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px;}
  .cell.star{background:#1abc9c;}
  .cell.bomb{background:#e74c3c;}
</style>
</head>
<body>

<!-- LOGIN PAGE -->
<div id="login" class="page active">
  <h2>Bashoratchi Uz</h2>
  <input type="text" id="uid" placeholder="ID"><br>
  <input type="text" id="ukey" placeholder="KEY"><br>
  <button onclick="login()">Kirish</button>
  <p id="error" style="color:red;"></p>
</div>

<!-- MINES PAGE -->
<div id="main" class="page">
  <h2>Mines Signal</h2>
  <button onclick="signal()">Signal</button>
  <button onclick="resetGrid()">Reset</button>
  <div id="grid" class="grid"></div>
</div>

<script>
const CORRECT_ID = "27102008";   // sizning ID
const CORRECT_KEY = "5420";      // sizning KEY
const SIZE = 25;
const SPEED = 80;
let bombs = new Set(), timer=null;

function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function login(){
  let id=document.getElementById("uid").value.trim();
  let key=document.getElementById("ukey").value.trim();
  if(id===CORRECT_ID && key===CORRECT_KEY){
    showPage("main");
    buildGrid();
  }else{
    document.getElementById("error").textContent="‚ùå ID yoki KEY noto‚Äòg‚Äòri!";
  }
}

function buildGrid(){
  let g=document.getElementById("grid");
  g.innerHTML="";
  for(let i=0;i<SIZE;i++){
    let d=document.createElement("div");
    d.className="cell"; d.dataset.i=i;
    g.appendChild(d);
  }
}

function resetGrid(){
  clearInterval(timer); timer=null; buildGrid();
}

function signal(){
  resetGrid();
  bombs=new Set();
  while(bombs.size<3){ bombs.add(Math.floor(Math.random()*SIZE)); }
  let order=[...bombs];
  for(let i=0;i<SIZE;i++){ if(!bombs.has(i)) order.push(i); }
  let k=0;
  timer=setInterval(()=>{
    if(k>=order.length){clearInterval(timer);return;}
    reveal(order[k++]);
  },SPEED);
}

function reveal(i){
  let c=document.querySelector(`.cell[data-i="${i}"]`);
  if(!c)return;
  if(bombs.has(i)){c.classList.add("bomb");c.textContent="üí£";}
  else{c.classList.add("star");c.textContent="‚≠ê";}
}
</script>
</body>
</html>
